{"version":3,"sources":["components/Layer/ProjectedLayer.tsx"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA,IAAY,KAAK,WAAM,OAAO,CAAC,CAAA;AAC/B,0BAMO,iBAAiB,CAAC,CAAA;AAEzB,QAAO,cAAc,CAAC,CAAA;AAiBtB;;;GAGG;AACH;IAAoC,kCAAyD;IAI3F,wBAAY,KAA4B;QACtC,kBAAM,KAAK,CAAC,CAAC;QAEb,IAAI,CAAC,KAAK,GAAG;YACX,SAAS,EAAE,KAAK;SACjB,CAAC;QAEF,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC,kBAAkB,CAAC;IAC/C,CAAC;IAEM,8CAAqB,GAA5B;QACE,MAAM,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC;IAC/B,CAAC;IAEM,0CAAiB,GAAxB;QACE,4BAAgB,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC;QAC9D,IAAI,CAAC,QAAQ,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC,CAAC;IACrC,CAAC;IAEM,+BAAM,GAAb;QACE,IAAI,WAAW,GAAG,0BAAc,CAAkC,IAAI,CAAC,YAAY,EAAE,yBAAa,CAAC,CAAC;QAEpG,iGAAiG;QACjG,mGAAmG;QACnG,yEAAyE;QAEzE,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC;YAC1B,OAAO,WAAW,CAAC,QAAQ,CAAC;QAC9B,CAAC;QAED,MAAM,CAAC,CACL,qBAAC,GAAG,gBACG,WAAW,GAChB,SAAS,EAAG,eAAG,CAAC,mBAAmB,EAAE,WAAW,CAAC,SAAS,CAAG,EAC7D,GAAG,EAAG,IAAI,CAAC,WAAW,CAAC,cAAc,CAAG,GACtC,CACL,CAAC;IACJ,CAAC;IAEM,8BAAK,GAAZ;QACE,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC;IAC5B,CAAC;IAEM,qCAAY,GAAnB,UAAoB,WAAgB;QAClC,IAAI,CAAC,YAAY,GAAG,WAAW,CAAC;QAChC,IAAI,CAAC,WAAW,EAAE,CAAC;IACrB,CAAC;IACH,qBAAC;AAAD,CAnDA,AAmDC,CAnDmC,yBAAa,GAmDhD;AAnDY,sBAAc,iBAmD1B,CAAA","file":"components/Layer/ProjectedLayer.js","sourcesContent":["import * as React from 'react';\r\nimport {\r\n  BaseComponent,\r\n  css,\r\n  divProperties,\r\n  getNativeProps,\r\n  setVirtualParent\r\n} from '../../Utilities';\r\nimport { ILayerProps } from './Layer.Props';\r\nimport './Layer.scss';\r\n\r\nexport interface IProjectedLayerProps extends React.Props<ProjectedLayer> {\r\n  /** Indicates a unique id for the layer, if applicable. */\r\n  layerId: string;\r\n\r\n  /** Virtual parent element. */\r\n  parentElement: HTMLElement;\r\n\r\n  /** Indicates the layer to redirect to. */\r\n  defaultRemoteProps: ILayerProps;\r\n}\r\n\r\nexport interface IProjectedLayerState {\r\n  isMounted: boolean;\r\n}\r\n\r\n/**\r\n * ProjectedLayer is an internal helper component that projects the contents rendered within a Layer. It is created\r\n * by the corresponding LayerHost that the originating Layer communicates with.\r\n */\r\nexport class ProjectedLayer extends BaseComponent<IProjectedLayerProps, IProjectedLayerState> {\r\n  private _rootElement: HTMLElement;\r\n  private _remoteProps: ILayerProps;\r\n\r\n  constructor(props?: IProjectedLayerProps) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      isMounted: false\r\n    };\r\n\r\n    this._remoteProps = props.defaultRemoteProps;\r\n  }\r\n\r\n  public shouldComponentUpdate() {\r\n    return !this.state.isMounted;\r\n  }\r\n\r\n  public componentDidMount() {\r\n    setVirtualParent(this._rootElement, this.props.parentElement);\r\n    this.setState({ isMounted: true });\r\n  }\r\n\r\n  public render() {\r\n    let remoteProps = getNativeProps<React.HTMLProps<HTMLDivElement>>(this._remoteProps, divProperties);\r\n\r\n    // If this is the first render, let's avoid rendering children until we're certain that we've set\r\n    // the virtual parent. After that, we can safely render the children, which in turn can safely call\r\n    // dom utilities like elementContains, which respects the virtual parent.\r\n\r\n    if (!this.state.isMounted) {\r\n      delete remoteProps.children;\r\n    }\r\n\r\n    return (\r\n      <div\r\n        { ...remoteProps }\r\n        className={ css('ms-ProjectedLayer', remoteProps.className) }\r\n        ref={ this._resolveRef('_rootElement') }\r\n        />\r\n    );\r\n  }\r\n\r\n  public getId() {\r\n    return this.props.layerId;\r\n  }\r\n\r\n  public projectProps(remoteProps: any) {\r\n    this._remoteProps = remoteProps;\r\n    this.forceUpdate();\r\n  }\r\n}\r\n"],"sourceRoot":"..\\..\\..\\src"}